import 'package:flights_logger/src/calculation/get_flight_minutes.dart';
import 'package:test/test.dart';

void main() {
  test('getFlightMinutes splits flight time onto day and night minutes ', () {
    List<List<double>> data = [
      // [count, flightStart, flightEnd, expected atDay, expected atNight]
      [1, 20.19, 20.19, 0, 0],
      [2, 20.19, 20.20, 0, 1],
      [3, 20.19, 20.18, 960, 479],
      [4, 21.04, 21.04, 0, 0],
      [5, 21.04, 21.05, 0, 1],
      [6, 21.04, 21.03, 960, 479],
      [7, 3.59, 3.59, 0, 0],
      [8, 3.59, 4, 0, 1],
      [9, 3.59, 3.58, 960, 479],
      [10, 4.14, 4.14, 0, 0],
      [11, 4.14, 4.15, 1, 0],
      [12, 4.14, 4.13, 959, 480],
      [13, 19.33, 19.33, 0, 0],
      [14, 19.33, 19.34, 1, 0],
      [15, 19.33, 19.32, 959, 480],
      [16, 0, 0, 0, 0],
      [17, 0, 16.13, 733, 240],
      [18, 23.59, 16.13, 733, 241],
      [19, 0, 23.59, 960, 479],
      [20, 20, 20, 0, 0],
      [21, 4, 4, 0, 0],
      [22, 20, 21.2, 0, 80],
      [23, 20.1, 20, 960, 470],
      [24, 20, 20.2, 0, 20],
      [25, 20.3, 20.4, 0, 10],
      [26, 20.4, 20.3, 960, 470],
      [27, 23, 23, 0, 0],
      [28, 23, 23.2, 0, 20],
      [29, 23.4, 23.3, 960, 470],
      [30, 21.59, 23.3, 0, 91],
      [31, 23.2, 0.4, 0, 80],
      [32, 23.31, 3.37, 0, 246],
      [33, 23.4, 4.1, 10, 260],
      [34, 23.5, 6.2, 140, 250],
      [35, 23.3, 18.5, 890, 270],
      [36, 23.3, 21.5, 960, 380],
      [37, 23.1, 20.1, 960, 300],
      [38, 23.3, 21.2, 960, 350],
      [39, 23.4, 22.1, 960, 390],
      [40, 0.1, 3.3, 0, 200],
      [41, 1.2, 3, 0, 100],
      [42, 0.3, 4, 0, 210],
      [43, 0.3, 4.1, 10, 210],
      [44, 0.4, 14, 600, 200],
      [45, 0, 14.1, 610, 240],
      [46, 3.44, 4.19, 19, 16],
      [47, 3.55, 18.23, 863, 5],
      [48, 0.4, 23.1, 960, 390],
      [49, 1.19, 9.44, 344, 161],
      [50, 3.19, 4.01, 1, 41],
      [51, 1.44, 9, 300, 136],
      [52, 3.36, 4.07, 7, 24],
      [53, 4.1, 4, 950, 480],
      [54, 4.3, 4.4, 10, 0],
      [55, 4.38, 4.37, 959, 480],
      [56, 4.3, 19.2, 890, 0],
      [57, 4.5, 22.4, 910, 160],
      [58, 4.2, 0.5, 940, 290],
      [59, 4.3, 2.1, 930, 370],
      [60, 6.44, 4.44, 840, 480],
      [61, 18.2, 20.3, 100, 30],
      [62, 19.44, 20.19, 16, 19],
      [63, 19.11, 3.01, 49, 421],
      [64, 19.59, 20.39, 1, 39],
      [65, 18.14, 21.43, 106, 103],
      [66, 18.37, 1.26, 83, 326],
    ];

    for (final args in data) {
      var count = args[0].toInt();
      var minutes = getFlightMinutes(
        dayStart: 4,
        dayEnd: 20,
        flightStart: args[1],
        flightEnd: args[2],
      );
      expect(
        ['Test $count', minutes.atDay, minutes.atNight],
        equals(['Test $count', args[3], args[4]]),
      );
    }
  });
}
